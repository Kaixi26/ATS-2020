<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Menu.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ats_07_refractored$traz_aqui_in_ats_07_refractored.exec</a> &gt; <a href="index.source.html" class="el_package">traz_aqui</a> &gt; <span class="el_source">Menu.java</span></div><h1>Menu.java</h1><pre class="source lang-java linenums">package traz_aqui;

import java.util.Scanner;
import java.util.ArrayList;
import java.util.List;
import java.io.*;
import java.util.Random;
import java.lang.String;


public class Menu implements Serializable
{     private main t;
    
    
    public static void main(){
<span class="nc" id="L16">        new Menu().menuInicial();</span>
<span class="nc" id="L17">    }</span>
        
<span class="nc" id="L19">    private Menu(){</span>
<span class="nc" id="L20">           Scanner escolha = new Scanner(System.in);</span>
<span class="nc" id="L21">           System.out.println(&quot;Escolha 1 para logs do stor, escolha 2 para logs do sistema:&quot;);</span>
<span class="nc" id="L22">           int es = escolha.nextInt();</span>
<span class="nc bnc" id="L23" title="All 2 branches missed.">           if(es==1){this.t = main.parse(&quot;logs.txt&quot;,1);}</span>
<span class="nc bnc" id="L24" title="All 2 branches missed.">           else if (es==2){this.t = main.parse(&quot;logs2.txt&quot;,2);}</span>
<span class="nc" id="L25">    }</span>
    
    
    
    private void save(){
        try{ 
<span class="nc" id="L31">                this.t.writeFile2(&quot;logs2.txt&quot;);</span>
<span class="nc" id="L32">        }catch (FileNotFoundException f){</span>
<span class="nc" id="L33">                System.out.print(&quot;Erro na gravação!&quot;);</span>
<span class="nc" id="L34">        }catch(IOException f){</span>
<span class="nc" id="L35">                System.out.print(&quot;Erro na gravação!&quot;);</span>
<span class="nc" id="L36">        }</span>
<span class="nc" id="L37">    }</span>
    
    //Corre a aplicação
    public void menuInicial(){
<span class="nc" id="L41">    int flag =0;</span>
<span class="nc bnc" id="L42" title="All 2 branches missed.">        while(flag ==0){</span>
<span class="nc" id="L43">        Scanner escolha = new Scanner(System.in);</span>
<span class="nc" id="L44">        System.out.println(&quot;1: Login&quot;);</span>
<span class="nc" id="L45">        System.out.println(&quot;2: Register&quot;);</span>
<span class="nc" id="L46">        System.out.println(&quot;3: Top10 Transportadoras &quot;);</span>
<span class="nc" id="L47">        System.out.println(&quot;4: Top10 Users &quot;);</span>
<span class="nc" id="L48">        System.out.println(&quot;5: Historico de um traz_aqui.Voluntario ou traz_aqui.Transportadora&quot;);</span>
<span class="nc" id="L49">        System.out.println(&quot;6: Total Faturado Por uma empresa num determinado periodo&quot;);</span>
<span class="nc" id="L50">        System.out.println(&quot;0: Close&quot;);</span>
<span class="nc" id="L51">        int es = escolha.nextInt();</span>
<span class="nc bnc" id="L52" title="All 2 branches missed.">        if(es==1){</span>
<span class="nc" id="L53">            Scanner e = new Scanner(System.in);</span>
<span class="nc" id="L54">            System.out.println(&quot;Introduza o seu e-mail:&quot;);</span>
<span class="nc" id="L55">            String email = e.nextLine();</span>
<span class="nc" id="L56">            Scanner password = new Scanner(System.in);</span>
<span class="nc" id="L57">            System.out.println(&quot;Introduza a sua password:&quot;);</span>
<span class="nc" id="L58">            String p = password.nextLine();</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">            if(t.LoginInfo(email,p)){</span>
<span class="nc" id="L60">                User x= null; </span>
<span class="nc bnc" id="L61" title="All 2 branches missed.">                if(t.getUserByEmail(email).equals(x)){</span>
<span class="nc" id="L62">                    System.out.println(&quot;Email não existe&quot;);</span>
<span class="nc" id="L63">                    this.save(); return ; </span>
                }
<span class="nc" id="L65">                x=t.getUserByEmail(email);</span>
<span class="nc" id="L66">                String cod = t.getUserByEmail(email).getCodigo();</span>
<span class="nc bnc" id="L67" title="All 2 branches missed.">                if(x.getClass().getName().equals(&quot;traz_aqui.Buyer&quot;) ){this.menuB(cod);}</span>
<span class="nc bnc" id="L68" title="All 2 branches missed.">                else if(x.getClass().getName().equals(&quot;traz_aqui.Voluntario&quot;) ){this.menuV(cod);}</span>
<span class="nc bnc" id="L69" title="All 2 branches missed.">                else if(x.getClass().getName().equals(&quot;traz_aqui.Loja&quot;) ){this.menuL(cod);}</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">                else if(x.getClass().getName().equals(&quot;traz_aqui.Transportadora&quot;) ){}</span>
                
<span class="nc" id="L72">                }</span>
<span class="nc" id="L73">            else{System.out.println(&quot;Email ou pw nao existem&quot;);this.save();this.t = main.parse(&quot;logs2.txt&quot;,2);}</span>
<span class="nc" id="L74">            }</span>
<span class="nc bnc" id="L75" title="All 2 branches missed.">        else if(es==2){</span>
<span class="nc" id="L76">            this.register();</span>
        }
<span class="nc bnc" id="L78" title="All 2 branches missed.">        else if(es==3){t.top10Empresas();}</span>
<span class="nc bnc" id="L79" title="All 2 branches missed.">        else if(es==4){t.top10Users();}</span>
<span class="nc bnc" id="L80" title="All 2 branches missed.">        else if(es==5){t.faturadoEmp();}</span>
<span class="nc bnc" id="L81" title="All 2 branches missed.">        else if(es==6){t.faturadoEmp();}</span>
<span class="nc" id="L82">        else { save();break;  }</span>
            
<span class="nc" id="L84">    }</span>
<span class="nc" id="L85">}</span>
    
public void register(){
<span class="nc" id="L88">        System.out.println(&quot;Quer se registar como?&quot;);</span>
<span class="nc" id="L89">        System.out.println(&quot;1: traz_aqui.Buyer&quot;);</span>
<span class="nc" id="L90">        System.out.println(&quot;2: traz_aqui.Voluntario &quot;);</span>
<span class="nc" id="L91">        System.out.println(&quot;3: traz_aqui.Transportadora &quot;);</span>
<span class="nc" id="L92">        System.out.println(&quot;4: loja&quot;);</span>
<span class="nc" id="L93">        System.out.println(&quot;0: Close&quot;);</span>
<span class="nc" id="L94">        Scanner escolha = new Scanner(System.in);</span>
<span class="nc" id="L95">        int es = escolha.nextInt(); </span>
<span class="nc bnc" id="L96" title="All 4 branches missed.">        if(es==1){String codbuyerF=registerbuyer();if(codbuyerF.equals(&quot;0&quot;)){}else{this.menuB(codbuyerF);}}</span>
<span class="nc bnc" id="L97" title="All 4 branches missed.">        else if(es==2){String codvolF=registerVoluntario();if(codvolF.equals(&quot;0&quot;)){}else{this.menuV(codvolF);}}</span>
<span class="nc bnc" id="L98" title="All 4 branches missed.">        else if(es==3){String codtransF=registerTransportadora();if(codtransF.equals(&quot;0&quot;)){}else{this.menuT(codtransF);}}</span>
<span class="nc bnc" id="L99" title="All 4 branches missed.">        else if(es==4){String codLojF=registerLoja();if(codLojF.equals(&quot;0&quot;)){}else{this.menuL(codLojF);}}</span>
<span class="nc" id="L100">        else{save();</span>
<span class="nc" id="L101">            this.t = main.parse(&quot;logs2.txt&quot;,2);}</span>

<span class="nc" id="L103">    }</span>
    // username,codigo,password,lx,ly,email, custokm , raio ,nif , aval, numrev
    public String registerTransportadora(){
<span class="nc" id="L106">        Transportadora b= null ;</span>
<span class="nc" id="L107">        String result =&quot;0&quot;;</span>
<span class="nc" id="L108">        Scanner e = new Scanner(System.in);</span>
<span class="nc" id="L109">        System.out.println(&quot;insira email:&quot;);</span>
<span class="nc" id="L110">        String email = e.nextLine();</span>
        
<span class="nc" id="L112">        Scanner p = new Scanner(System.in);</span>
<span class="nc" id="L113">        System.out.println(&quot;insira uma password: &quot;);</span>
<span class="nc" id="L114">        String password = p.nextLine();</span>
        
<span class="nc" id="L116">        Scanner n = new Scanner(System.in);</span>
<span class="nc" id="L117">        System.out.println(&quot;insira o nome da empresa: &quot;);</span>
<span class="nc" id="L118">        String name = n.nextLine();</span>
        
        
<span class="nc" id="L121">        Scanner x1 = new Scanner(System.in);</span>
<span class="nc" id="L122">        System.out.println(&quot;insira as suas coordenadas:&quot;);</span>
<span class="nc" id="L123">        System.out.println(&quot;Coordenada X&quot;);</span>
<span class="nc" id="L124">        String x = x1.nextLine();</span>
<span class="nc" id="L125">        Scanner y1 = new Scanner(System.in);</span>
<span class="nc" id="L126">        System.out.println(&quot;Coordenada Y&quot;);</span>
<span class="nc" id="L127">        String y = y1.nextLine();</span>
        
<span class="nc" id="L129">        Scanner custo1 = new Scanner(System.in);</span>
<span class="nc" id="L130">        System.out.println(&quot;insira o custo por km:&quot;);</span>
<span class="nc" id="L131">        String custo = custo1.nextLine();</span>
        
<span class="nc" id="L133">        Scanner r1 = new Scanner(System.in);</span>
<span class="nc" id="L134">        System.out.println(&quot;insira o raio em que pode fazer entregas:&quot;);</span>
<span class="nc" id="L135">        String r = r1.nextLine();</span>
        
<span class="nc" id="L137">        Scanner nif1 = new Scanner(System.in);</span>
<span class="nc" id="L138">        System.out.println(&quot;insira o nif da empresa:&quot;);</span>
<span class="nc" id="L139">        String nif = nif1.nextLine();</span>
        
<span class="nc" id="L141">        String codigo = &quot;t&quot;+this.getRandomNumberString();</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">        while(t.checkCodigo(codigo) == false ){</span>
<span class="nc" id="L143">            codigo = &quot;l&quot;+this.getRandomNumberString();}</span>
        
        try{
<span class="nc" id="L146">             b= new Transportadora(name,codigo,password,Double.parseDouble(x),Double.parseDouble(y),email,</span>
<span class="nc" id="L147">             Double.parseDouble(custo), Double.parseDouble(r),Integer.parseInt(nif), 0, 0);</span>
        }
<span class="nc" id="L149">        catch(NullPointerException erro){</span>
<span class="nc" id="L150">            System.out.println(&quot;Erro no preenchimento!&quot;);</span>
            
<span class="nc" id="L152">            return result;</span>
<span class="nc" id="L153">        }</span>
        
<span class="nc bnc" id="L155" title="All 2 branches missed.">        if (this.t.addTrans(b)==1){System.out.println(&quot;registo feito com sucesso &quot;);save();return codigo; }</span>
<span class="nc" id="L156">        return result; </span>
    }
    //username,codigo,password,lx,ly,email, raio,livre,numreviews,avaliacao
    public String registerVoluntario(){
<span class="nc" id="L160">        Voluntario b= null ;</span>
<span class="nc" id="L161">        String result =&quot;0&quot;;</span>
<span class="nc" id="L162">        Scanner e = new Scanner(System.in);</span>
<span class="nc" id="L163">        System.out.println(&quot;insira email:&quot;);</span>
<span class="nc" id="L164">        String email = e.nextLine();</span>
        
<span class="nc" id="L166">        Scanner p = new Scanner(System.in);</span>
<span class="nc" id="L167">        System.out.println(&quot;insira uma password: &quot;);</span>
<span class="nc" id="L168">        String password = p.nextLine();</span>
        
<span class="nc" id="L170">        Scanner n = new Scanner(System.in);</span>
<span class="nc" id="L171">        System.out.println(&quot;insira o seu nome: &quot;);</span>
<span class="nc" id="L172">        String name = n.nextLine();</span>
        
        
<span class="nc" id="L175">        Scanner x1 = new Scanner(System.in);</span>
<span class="nc" id="L176">        System.out.println(&quot;insira as suas coordenadas:&quot;);</span>
<span class="nc" id="L177">        System.out.println(&quot;Coordenada X&quot;);</span>
<span class="nc" id="L178">        String x = x1.nextLine();</span>
<span class="nc" id="L179">        Scanner y1 = new Scanner(System.in);</span>
<span class="nc" id="L180">        System.out.println(&quot;Coordenada Y&quot;);</span>
<span class="nc" id="L181">        String y = y1.nextLine();</span>
        
<span class="nc" id="L183">        Scanner r1 = new Scanner(System.in);</span>
<span class="nc" id="L184">        System.out.println(&quot;insira o raio em que pode fazer entregas:&quot;);</span>
<span class="nc" id="L185">        String r = r1.nextLine();</span>
        
<span class="nc" id="L187">        String codigo = &quot;v&quot;+this.getRandomNumberString();</span>
<span class="nc bnc" id="L188" title="All 2 branches missed.">        while(t.checkCodigo(codigo) == false ){</span>
<span class="nc" id="L189">            codigo = &quot;l&quot;+this.getRandomNumberString();}</span>
        
        try{
<span class="nc" id="L192">             b= new Voluntario(name,codigo,password,Double.parseDouble(x),Double.parseDouble(y),email,</span>
<span class="nc" id="L193">             Double.parseDouble(r),true, 0, 0);</span>
        }
<span class="nc" id="L195">        catch(NullPointerException erro){</span>
<span class="nc" id="L196">            System.out.println(&quot;Erro no preenchimento!&quot;);</span>
<span class="nc" id="L197">            return result;</span>
<span class="nc" id="L198">        }</span>
        
<span class="nc bnc" id="L200" title="All 2 branches missed.">        if (this.t.addVol(b)==1){System.out.println(&quot;registo feito com sucesso &quot;);save();return codigo; }</span>
        
<span class="nc" id="L202">      return result;  </span>
    }
    //username,codigo,password,lx,ly,email
    public String registerLoja(){
<span class="nc" id="L206">        Loja b= null ;</span>
<span class="nc" id="L207">        String result =&quot;0&quot;;</span>
<span class="nc" id="L208">        Scanner e = new Scanner(System.in);</span>
<span class="nc" id="L209">        System.out.println(&quot;insira email:&quot;);</span>
<span class="nc" id="L210">        String email = e.nextLine();</span>
        
<span class="nc" id="L212">        Scanner p = new Scanner(System.in);</span>
<span class="nc" id="L213">        System.out.println(&quot;insira uma password: &quot;);</span>
<span class="nc" id="L214">        String password = p.nextLine();</span>
        
<span class="nc" id="L216">        Scanner n = new Scanner(System.in);</span>
<span class="nc" id="L217">        System.out.println(&quot;insira o nome da loja: &quot;);</span>
<span class="nc" id="L218">        String name = n.nextLine();</span>
        
        
<span class="nc" id="L221">        Scanner x1 = new Scanner(System.in);</span>
<span class="nc" id="L222">        System.out.println(&quot;insira as suas coordenadas:&quot;);</span>
<span class="nc" id="L223">        System.out.println(&quot;Coordenada X&quot;);</span>
<span class="nc" id="L224">        String x = x1.nextLine();</span>
<span class="nc" id="L225">        Scanner y1 = new Scanner(System.in);</span>
<span class="nc" id="L226">        System.out.println(&quot;Coordenada Y&quot;);</span>
<span class="nc" id="L227">        String y = y1.nextLine();</span>
        
<span class="nc" id="L229">        String codigo = &quot;l&quot;+this.getRandomNumberString();</span>
<span class="nc bnc" id="L230" title="All 2 branches missed.">        while(t.checkCodigo(codigo) == false ){</span>
<span class="nc" id="L231">            codigo = &quot;l&quot;+this.getRandomNumberString();</span>
        }
        
        try{
<span class="nc" id="L235">            b = new Loja(name,codigo,password,Double.parseDouble(x),Double.parseDouble(y),email);</span>
        }
<span class="nc" id="L237">        catch(NullPointerException erro){</span>
<span class="nc" id="L238">            System.out.println(&quot;Erro no preenchimento!&quot;);</span>
<span class="nc" id="L239">            return result; </span>
<span class="nc" id="L240">        }</span>
        
<span class="nc bnc" id="L242" title="All 2 branches missed.">        if (this.t.addLoja(b)==1){System.out.println(&quot;registo feito com sucesso &quot;);save();return codigo;}</span>
<span class="nc" id="L243">        return result ; </span>
    }
    //username,codigo,password,lx,ly,email
    public String registerbuyer(){
<span class="nc" id="L247">        Buyer b= null ;String result =&quot;0&quot;;</span>
<span class="nc" id="L248">        Scanner e = new Scanner(System.in);</span>
<span class="nc" id="L249">        System.out.println(&quot;insira email:&quot;);</span>
<span class="nc" id="L250">        String email = e.nextLine();</span>
        
<span class="nc" id="L252">        Scanner p = new Scanner(System.in);</span>
<span class="nc" id="L253">        System.out.println(&quot;insira uma password: &quot;);</span>
<span class="nc" id="L254">        String password = p.nextLine();</span>
        
<span class="nc" id="L256">        Scanner n = new Scanner(System.in);</span>
<span class="nc" id="L257">        System.out.println(&quot;insira o seu nome: &quot;);</span>
<span class="nc" id="L258">        String name = n.nextLine();</span>
        
        
<span class="nc" id="L261">        Scanner x1 = new Scanner(System.in);</span>
<span class="nc" id="L262">        System.out.println(&quot;insira as suas coordenadas:&quot;);</span>
<span class="nc" id="L263">        System.out.println(&quot;Coordenada X&quot;);</span>
<span class="nc" id="L264">        String x = x1.nextLine();</span>
<span class="nc" id="L265">        Scanner y1 = new Scanner(System.in);</span>
<span class="nc" id="L266">        System.out.println(&quot;Coordenada Y&quot;);</span>
<span class="nc" id="L267">        String y = y1.nextLine();</span>
        
<span class="nc" id="L269">        String codigo = &quot;u&quot;+this.getRandomNumberString();</span>
<span class="nc bnc" id="L270" title="All 2 branches missed.">        while(t.checkCodigo(codigo) == false ){</span>
<span class="nc" id="L271">            codigo = &quot;u&quot;+this.getRandomNumberString();}</span>
        
        try{
<span class="nc" id="L274">            b = new Buyer(name,codigo,password,Double.parseDouble(x),Double.parseDouble(y),email);</span>
        }
<span class="nc" id="L276">        catch(NullPointerException erro){</span>
<span class="nc" id="L277">            System.out.println(&quot;Erro no preenchimento!&quot;);</span>
<span class="nc" id="L278">            return result;</span>
<span class="nc" id="L279">        }</span>
        
<span class="nc bnc" id="L281" title="All 2 branches missed.">        if (this.t.addBuy(b)==1){System.out.println(&quot;registo feito com sucesso &quot;);save();return codigo; }</span>
<span class="nc" id="L282">        return result ; </span>
    }
    
    
    
    
    public String getRandomNumberString() {
     // It will generate 6 digit random Number.
     // from 0 to 999999
<span class="nc" id="L291">     Random rnd = new Random();</span>
<span class="nc" id="L292">     int number = rnd.nextInt(999999);</span>

     // this will convert any number sequence into 6 character.
<span class="nc" id="L295">     return String.format(&quot;%06d&quot;, number);</span>
    }
    
    public void menuT(String codigo){
<span class="nc" id="L299">        int i =0;</span>
<span class="nc" id="L300">        User volun = t.getUserByCodigo(codigo);</span>

<span class="nc bnc" id="L302" title="All 2 branches missed.">        while(i==0){</span>
<span class="nc" id="L303">            Scanner optn = new Scanner(System.in);</span>
<span class="nc" id="L304">            System.out.println(&quot;1: Levantar traz_aqui.Encomenda&quot;); // pronto para fazer encomendas ou nao</span>
<span class="nc" id="L305">            System.out.println(&quot;2: Marcar encomenda entregue&quot;);</span>
<span class="nc" id="L306">            System.out.println(&quot;3: Historico&quot;);</span>
            //System.out.println(&quot;4: Encomendas durante uma certa data&quot;); // se tiver tempo----------- fazer tb voluntariado nao esquecer 
<span class="nc" id="L308">            System.out.println(&quot;0: Sair&quot;);</span>
<span class="nc" id="L309">            int op = optn.nextInt();</span>
            
<span class="nc bnc" id="L311" title="All 2 branches missed.">            if(op==1){</span>
<span class="nc" id="L312">                System.out.println(&quot;Insira codigo de encomenda para ser levantada&quot;);</span>
<span class="nc" id="L313">                Scanner codEncMenuT1 = new Scanner(System.in);</span>
<span class="nc" id="L314">                String codEncMenuT = codEncMenuT1.nextLine();</span>
                
<span class="nc" id="L316">                t.mudaestadoENC(codEncMenuT,6);</span>
                
                
                
<span class="nc bnc" id="L320" title="All 2 branches missed.">            }else if(op==2){</span>
<span class="nc" id="L321">                System.out.println(&quot;Insira codigo de encomenda que foi entregue&quot;);</span>
<span class="nc" id="L322">                Scanner codEncMenuT1 = new Scanner(System.in);</span>
<span class="nc" id="L323">                String codEncMenuT = codEncMenuT1.nextLine();</span>
                
<span class="nc" id="L325">                t.mudaestadoENC(codEncMenuT,6);</span>
                 
                      
                
                
                
<span class="nc bnc" id="L331" title="All 2 branches missed.">            }else if(op==3){t.PrintHistT(codigo);</span>
            }
<span class="nc" id="L333">            else{this.save();break;}</span>
<span class="nc" id="L334">       }</span>
<span class="nc" id="L335">     }</span>
    
    public void menuL(String codigo){
<span class="nc" id="L338">        int i =0;</span>
<span class="nc" id="L339">        User cloja = t.getUserByCodigo(codigo);</span>

<span class="nc bnc" id="L341" title="All 2 branches missed.">        while(i==0){</span>
<span class="nc" id="L342">            Scanner optn = new Scanner(System.in);</span>
<span class="nc" id="L343">            System.out.println(&quot;1: traz_aqui.Encomenda pronta&quot;); // pronto para fazer encomendas ou nao</span>
<span class="nc" id="L344">             System.out.println(&quot;2: Pedir random voluntario&quot;);</span>
<span class="nc" id="L345">            System.out.println(&quot;0: Sair&quot;);</span>
<span class="nc" id="L346">            int op = optn.nextInt();</span>
            
<span class="nc bnc" id="L348" title="All 2 branches missed.">            if(op==1){</span>
<span class="nc" id="L349">                System.out.println(&quot;Insira codigo de encomenda para ser levantada&quot;);</span>
<span class="nc" id="L350">                Scanner codEncMenuL1 = new Scanner(System.in);</span>
<span class="nc" id="L351">                String codEncMenu = codEncMenuL1.nextLine();</span>
<span class="nc bnc" id="L352" title="All 2 branches missed.">                if(t.TransportadoraOuVoluntario(codEncMenu)==1){t.mudaestadoENC(codEncMenu,4);}</span>
<span class="nc bnc" id="L353" title="All 2 branches missed.">                else if(t.TransportadoraOuVoluntario(codEncMenu)==2){t.mudaestadoENC(codEncMenu,3);}</span>
<span class="nc bnc" id="L354" title="All 2 branches missed.">                else if(t.TransportadoraOuVoluntario(codEncMenu)==0){System.out.println(&quot; codigo de encomenda errado &quot;);}</span>
                
                
<span class="nc bnc" id="L357" title="All 2 branches missed.">                }else if(op==2) {</span>
<span class="nc" id="L358">                System.out.println(&quot;Insira codigo de encomenda para pedir a um voluntario&quot;);</span>
<span class="nc" id="L359">                Scanner codEncMenuL2 = new Scanner(System.in);</span>
<span class="nc" id="L360">                String codEncMenu1 = codEncMenuL2.nextLine();</span>
                
               
                    
                    
<span class="nc bnc" id="L365" title="All 2 branches missed.">                if(t.TransportadoraOuVoluntario(codEncMenu1)==0){</span>
<span class="nc" id="L366">                    String codV = t.getVolLivre(codEncMenu1);</span>
<span class="nc" id="L367">                    t.setDelieverV(codV,codEncMenu1);</span>
<span class="nc" id="L368">                    t.mudaestadoENC(codEncMenu1,8);</span>
                }
                    
                    
<span class="nc" id="L372">                }</span>
                
<span class="nc" id="L374">            else{this.save();break;}</span>
                
        
<span class="nc" id="L377">        }</span>
<span class="nc" id="L378">    }</span>

    
    
    public void menuV(String codigo){
<span class="nc" id="L383">        int i =0;</span>
<span class="nc" id="L384">        User volun = t.getUserByCodigo(codigo);</span>

<span class="nc bnc" id="L386" title="All 2 branches missed.">        while(i==0){</span>
<span class="nc" id="L387">            Scanner optn = new Scanner(System.in);</span>
<span class="nc" id="L388">            System.out.println(&quot;1: Mudar Estado&quot;); // pronto para fazer encomendas ou nao </span>
<span class="nc" id="L389">            System.out.println(&quot;2: Escolher encomendas disponiveis dentro de raio: &quot;); </span>
<span class="nc" id="L390">            System.out.println(&quot;3: Marcar encomenda entregue&quot;);</span>
<span class="nc" id="L391">            System.out.println(&quot;4: Historico&quot;);</span>
<span class="nc" id="L392">             System.out.println(&quot;5: Ver Encomendas para aceitar&quot;);</span>
<span class="nc" id="L393">            System.out.println(&quot;0: Sair&quot;);</span>
<span class="nc" id="L394">            int op = optn.nextInt();</span>
            
<span class="nc bnc" id="L396" title="All 2 branches missed.">            if(op==1){</span>
<span class="nc bnc" id="L397" title="All 2 branches missed.">                if(t.EncomendaAtualV(codigo).equals(&quot;free&quot;)){</span>
<span class="nc" id="L398">                t.mudaestadoVoluntario(volun);}</span>
<span class="nc" id="L399">                else{System.out.println(&quot;Tem de entregar a encomenda atual&quot;);}</span>
                
<span class="nc bnc" id="L401" title="All 2 branches missed.">            }else if(op==2){</span>
<span class="nc bnc" id="L402" title="All 2 branches missed.">                if(t.EncomendaAtualV(codigo).equals(&quot;free&quot;)){</span>
<span class="nc" id="L403">                List&lt;Encomenda&gt; encomendas = this.t.EncomendasParaVoluntarioDentroRaio(codigo);</span>
<span class="nc" id="L404">                Scanner l = new Scanner(System.in);</span>
<span class="nc" id="L405">                int i1 = 0;</span>
               
<span class="nc" id="L407">                System.out.println(&quot;Escolha uma traz_aqui.Encomenda: &quot;);</span>
                
<span class="nc bnc" id="L409" title="All 2 branches missed.">                for(Encomenda b : encomendas){</span>
<span class="nc" id="L410">                    System.out.println(i1 + &quot; - &quot; + b.getcodEncomenda());</span>
<span class="nc" id="L411">                    i1++;</span>
<span class="nc" id="L412">                }</span>
<span class="nc" id="L413">                int input = l.nextInt();</span>
<span class="nc bnc" id="L414" title="All 4 branches missed.">                if(0&lt;=input &amp;&amp; input &lt;i1){</span>
<span class="nc" id="L415">                    Encomenda encf = (Encomenda) encomendas.get(input);</span>
<span class="nc" id="L416">                    String codigoenc= encf.getcodEncomenda();</span>
<span class="nc" id="L417">                    t.mudaestadoENC(codigoenc,6);</span>
<span class="nc" id="L418">                    t.mudaestadoVoluntario(volun);</span>
<span class="nc" id="L419">                    t.setDelieverV(codigo,codigoenc);</span>
                    
<span class="nc" id="L421">                }else{System.out.println(&quot;Tem de entregar a encomenda atual&quot;);}}</span>
                               
                
                
<span class="nc bnc" id="L425" title="All 2 branches missed.">            }else if(op==3){</span>
<span class="nc bnc" id="L426" title="All 2 branches missed.">                 if(t.EncomendaAtualV(codigo).equals(&quot;free&quot;)){System.out.println(&quot;Não tem encomendas para marcar como entregues&quot;);</span>
                    }
<span class="nc" id="L428">                 else{String codigoenc= t.EncomendaAtualV(codigo);</span>
<span class="nc" id="L429">                      t.mudaestadoENC(codigoenc,1);</span>
                      
<span class="nc" id="L431">                    }   </span>
                
                
                
<span class="nc bnc" id="L435" title="All 2 branches missed.">            }else if(op==4){t.PrintHistV(codigo);}</span>
<span class="nc bnc" id="L436" title="All 2 branches missed.">             else if(op==5){</span>
<span class="nc bnc" id="L437" title="All 2 branches missed.">                 if(t.EncPedidas(codigo)!= &quot;n&quot;){</span>
<span class="nc" id="L438">                     String s = t.EncPedidas(codigo);</span>
<span class="nc" id="L439">                     Scanner optn1 = new Scanner(System.in);</span>
<span class="nc" id="L440">                     System.out.println(&quot;Aceita a encomenda&quot;+s+&quot;?&quot;);</span>
<span class="nc" id="L441">                     System.out.println(&quot;1.sim 2.nao:&quot;);</span>
<span class="nc" id="L442">                     int op1 = optn1.nextInt();</span>
<span class="nc bnc" id="L443" title="All 2 branches missed.">                     if(op==1){</span>
<span class="nc" id="L444">                            t.mudaestadoENC(s,6);</span>
<span class="nc" id="L445">                            t.mudaestadoVoluntario(volun);</span>
<span class="nc" id="L446">                            t.setDelieverV(codigo,s);</span>
                        }
<span class="nc" id="L448">                }</span>
            }   
            
<span class="nc" id="L451">            else{this.save();break;}</span>
<span class="nc" id="L452">       }</span>
<span class="nc" id="L453">     }</span>
    
    
    
    public void menuB(String codigo){
<span class="nc" id="L458">        int i =0;</span>

<span class="nc bnc" id="L460" title="All 2 branches missed.">        while(i==0){</span>
<span class="nc" id="L461">            Scanner optn = new Scanner(System.in);</span>
<span class="nc" id="L462">            System.out.println(&quot;1: Fazer uma encomenda&quot;);</span>
<span class="nc" id="L463">            System.out.println(&quot;2: Classificar Entregas&quot;);</span>
<span class="nc" id="L464">            System.out.println(&quot;4: Historico&quot;);</span>
<span class="nc" id="L465">            System.out.println(&quot;0: Sair&quot;);</span>
<span class="nc" id="L466">            int op = optn.nextInt();</span>
            
<span class="nc bnc" id="L468" title="All 2 branches missed.">            if(op==1){</span>
<span class="nc" id="L469">                List&lt;Loja&gt; lojas = this.t.Tlojas();</span>
<span class="nc" id="L470">                Scanner l = new Scanner(System.in);</span>
<span class="nc" id="L471">                int i1 = 0;</span>
               
<span class="nc" id="L473">                System.out.println(&quot;Escolha uma loja: &quot;);</span>
                
<span class="nc bnc" id="L475" title="All 2 branches missed.">                for(Loja loja : lojas){</span>
<span class="nc" id="L476">                    System.out.println(i1 + &quot; - &quot; + loja.getUserName());</span>
<span class="nc" id="L477">                    i1++;</span>
<span class="nc" id="L478">                }</span>
<span class="nc" id="L479">                int input = l.nextInt();</span>
<span class="nc bnc" id="L480" title="All 4 branches missed.">                if(0&lt;=input &amp;&amp; input &lt;i1){</span>
<span class="nc" id="L481">                    Loja lojaf = (Loja) lojas.get(input);</span>
<span class="nc" id="L482">                    Encomenda e = new Encomenda();</span>
<span class="nc" id="L483">                    String codenc = &quot;e&quot;+this.getRandomNumberString();</span>
<span class="nc" id="L484">                    String codu = codigo;</span>
<span class="nc" id="L485">                    String codlo=  lojaf.getEmail();</span>
<span class="nc" id="L486">                    String codT = &quot;&quot;;</span>
<span class="nc" id="L487">                    int estado = 2;</span>
                
<span class="nc" id="L489">                    ArrayList&lt;LinhaEncomenda&gt; produto = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L490">                    int flag =0;</span>
<span class="nc" id="L491">                    double peso2=0;</span>
<span class="nc bnc" id="L492" title="All 2 branches missed.">                    while(flag==0){</span>
<span class="nc" id="L493">                        int escolha2=0;</span>
<span class="nc" id="L494">                        System.out.println(&quot;insira codigo do produto &quot;);</span>
<span class="nc" id="L495">                        Scanner cp = new Scanner(System.in);</span>
<span class="nc" id="L496">                        String codp = cp.nextLine();</span>
                        
<span class="nc" id="L498">                        System.out.println(&quot;insira a quantidade&quot;);</span>
<span class="nc" id="L499">                        Scanner qp = new Scanner(System.in);</span>
<span class="nc" id="L500">                        Double quantp = qp.nextDouble();</span>
                        
<span class="nc" id="L502">                        double preco=3;</span>
<span class="nc" id="L503">                        double preco2=3.0*quantp;</span>
<span class="nc" id="L504">                        peso2=peso2+1*quantp;</span>
                        
<span class="nc" id="L506">                        LinhaEncomenda linha = new LinhaEncomenda(codp,&quot;&quot;,preco2,quantp);</span>
<span class="nc" id="L507">                        produto.add(linha);</span>
                        
<span class="nc" id="L509">                        System.out.println(&quot;quer continuar a comprar?&quot;);</span>
<span class="nc" id="L510">                        System.out.println(&quot;1: Sim&quot;);</span>
<span class="nc" id="L511">                        System.out.println(&quot;2: Nao&quot;);</span>
<span class="nc" id="L512">                        Scanner oplinhaenc = new Scanner(System.in);</span>
<span class="nc" id="L513">                        escolha2 = oplinhaenc.nextInt();</span>
<span class="nc bnc" id="L514" title="All 2 branches missed.">                        if(escolha2==2){flag=1;} </span>
                        
                        
<span class="nc" id="L517">                    }</span>

<span class="nc" id="L519">                    System.out.println(&quot;quer Transporte?&quot;);</span>
<span class="nc" id="L520">                    System.out.println(&quot;1: Sim&quot;);</span>
<span class="nc" id="L521">                    System.out.println(&quot;2: Nao&quot;);</span>
<span class="nc" id="L522">                    Scanner querTrans1 = new Scanner(System.in);</span>
<span class="nc" id="L523">                    int querTrans = querTrans1.nextInt();</span>
<span class="nc bnc" id="L524" title="All 2 branches missed.">                    if(querTrans ==1){</span>
                        //TransportadoraMaisBarata(String codBuyer,String codLoja, double peso)
<span class="nc" id="L526">                        String trasnporte =t.TransportadoraMaisBarata(codu,codlo,peso2);</span>
<span class="nc bnc" id="L527" title="All 2 branches missed.">                        if(trasnporte.equals(&quot;n&quot;)){}</span>
                        else{
                        //custoTransporte1 (String codBuyer , String codTransp,String codLoja, double peso )
<span class="nc" id="L530">                        double custoTrans=t.custoTransporte1(codu,trasnporte,codlo,peso2);</span>
<span class="nc" id="L531">                        System.out.println(&quot;Pela traz_aqui.Transportadora mais barata o preco fica:&quot;+custoTrans);</span>
<span class="nc" id="L532">                        System.out.println(&quot;Aceita?&quot;);</span>
<span class="nc" id="L533">                        System.out.println(&quot;1: Sim&quot;);</span>
<span class="nc" id="L534">                        System.out.println(&quot;2: Nao&quot;);</span>
<span class="nc" id="L535">                        Scanner aceitaTrans1 = new Scanner(System.in);</span>
<span class="nc" id="L536">                        int aceitaTrans = querTrans1.nextInt();</span>
<span class="nc bnc" id="L537" title="All 2 branches missed.">                        if(aceitaTrans ==1){codT=trasnporte;estado=5;}}</span>
                    }
                    
<span class="nc" id="L540">                    Encomenda  novaenc = new Encomenda(codenc,codu,codlo,codT, peso2 , null ,estado , produto);</span>
<span class="nc" id="L541">                    System.out.println(&quot;traz_aqui.Encomenda feita com sucesso&quot;);</span>
<span class="nc" id="L542">                    this.t.addEnc(novaenc);</span>
                    
<span class="nc" id="L544">                }</span>
                else{
<span class="nc" id="L546">                    System.out.println(&quot;Tente outra opcao&quot;);</span>
                }
                
<span class="nc bnc" id="L549" title="All 2 branches missed.">            }else if(op==2){</span>
                
<span class="nc" id="L551">                List&lt;Encomenda&gt; enc = this.t.EncomendasEntreguesSemReviews(codigo);</span>
                
<span class="nc" id="L553">                System.out.println(&quot;As suas encomendas:&quot;);</span>
<span class="nc bnc" id="L554" title="All 2 branches missed.">                    for(Encomenda e : enc){</span>
<span class="nc" id="L555">                        System.out.println(&quot;traz_aqui.Encomenda :&quot; + e.getcodEncomenda() + &quot;; Entregue por: &quot; + e.getcodDeliver() + t.getUserByCodigo(e.getcodDeliver()).getUserName());</span>
                    
<span class="nc" id="L557">                }</span>
<span class="nc" id="L558">                System.out.println(&quot;Escreva um codigo de encomenda para avaliar&quot;);</span>
<span class="nc" id="L559">                Scanner codencaval1 = new Scanner(System.in);</span>
<span class="nc" id="L560">                String codencaval = codencaval1.nextLine();</span>
                
<span class="nc" id="L562">                int flagcod =1;</span>
<span class="nc bnc" id="L563" title="All 2 branches missed.">                for(Encomenda e : enc){</span>
<span class="nc bnc" id="L564" title="All 2 branches missed.">                    if(e.getcodEncomenda().equals(codencaval1)){flagcod=0;break;}</span>
                    
<span class="nc" id="L566">                }</span>
                
<span class="nc bnc" id="L568" title="All 2 branches missed.">                if(flagcod==0){</span>
<span class="nc" id="L569">                System.out.println(&quot;a sua review entre 0 e 10&quot;);</span>
<span class="nc" id="L570">                Scanner reviewenc1 = new Scanner(System.in);</span>
<span class="nc" id="L571">                double reviewenc= reviewenc1.nextDouble();</span>
<span class="nc bnc" id="L572" title="All 4 branches missed.">                if(0&lt;= reviewenc &amp;&amp; reviewenc&lt;=10){</span>
<span class="nc bnc" id="L573" title="All 2 branches missed.">                 if(t.reviews(codencaval,reviewenc)){System.out.println(&quot;review feita com sucesso&quot;);}</span>
                }}
      
                
                
                
<span class="nc" id="L579">            }</span>
<span class="nc" id="L580">            else{ this.save();break;}</span>
<span class="nc" id="L581">       }</span>
<span class="nc" id="L582">     }</span>
}
        

    
    
    
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>