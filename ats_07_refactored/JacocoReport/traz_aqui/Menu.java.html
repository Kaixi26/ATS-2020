<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Menu.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ats_07_refractored$All_in_ats_07_refractored.exec</a> &gt; <a href="index.source.html" class="el_package">traz_aqui</a> &gt; <span class="el_source">Menu.java</span></div><h1>Menu.java</h1><pre class="source lang-java linenums">package traz_aqui;

import java.io.IOException;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import java.util.Scanner;


public class Menu implements Serializable {
    public static final String LOGS_2_TXT = &quot;logs2.txt&quot;;
    public static final String INSIRA_EMAIL = &quot;insira email:&quot;;
    public static final String INSIRA_UMA_PASS = &quot;insira uma password: &quot;;
    public static final String INSIRA_AS_SUAS_COORDENADAS = &quot;insira as suas coordenadas:&quot;;
    public static final String COORDENADA_X = &quot;Coordenada X&quot;;
    public static final String COORDENADA_Y = &quot;Coordenada Y&quot;;
    public static final String ERRO_NO_PREENCHIMENTO = &quot;Erro no preenchimento!&quot;;
    public static final String REGISTO_FEITO_COM_SUCESSO_ = &quot;registo feito com sucesso &quot;;
    public static final String SAIR = &quot;0: Sair&quot;;
    public static final String SIM = &quot;1: Sim&quot;;
    public static final String NAO = &quot;2: Nao&quot;;
<span class="nc" id="L23">    Random rnd = new Random();</span>
    private main t;


<span class="nc" id="L27">    private Menu() {</span>
<span class="nc" id="L28">        Scanner escolha = new Scanner(System.in);</span>
<span class="nc" id="L29">        System.out.println(&quot;Escolha 1 para logs do stor, escolha 2 para logs do sistema:&quot;);</span>
<span class="nc" id="L30">        int es = escolha.nextInt();</span>
<span class="nc bnc" id="L31" title="All 2 branches missed.">        if (es == 1) {</span>
<span class="nc" id="L32">            this.t = main.parse(&quot;logs.txt&quot;, 1);</span>
<span class="nc bnc" id="L33" title="All 2 branches missed.">        } else if (es == 2) {</span>
<span class="nc" id="L34">            this.t = main.parse(LOGS_2_TXT, 2);</span>
        }
<span class="nc" id="L36">    }</span>

    public static void main(String[] args) {
<span class="nc" id="L39">        new Menu().menuInicial();</span>
<span class="nc" id="L40">    }</span>

    private void save() {
        try {
<span class="nc" id="L44">            this.t.writeFile2(LOGS_2_TXT);</span>
<span class="nc" id="L45">        } catch (IOException f) {</span>
<span class="nc" id="L46">            System.out.print(&quot;Erro na gravação!&quot;);</span>
<span class="nc" id="L47">        }</span>
<span class="nc" id="L48">    }</span>

    //Corre a aplicação
    public void menuInicial() {
<span class="nc" id="L52">        int flag = 0;</span>
<span class="nc bnc" id="L53" title="All 2 branches missed.">        while (flag == 0) {</span>
<span class="nc" id="L54">            Scanner escolha = new Scanner(System.in);</span>
<span class="nc" id="L55">            System.out.println(&quot;1: Login&quot;);</span>
<span class="nc" id="L56">            System.out.println(&quot;2: Register&quot;);</span>
<span class="nc" id="L57">            System.out.println(&quot;3: Top10 Transportadoras &quot;);</span>
<span class="nc" id="L58">            System.out.println(&quot;4: Top10 Users &quot;);</span>
<span class="nc" id="L59">            System.out.println(&quot;5: Historico de um traz_aqui.Voluntario ou traz_aqui.Transportadora&quot;);</span>
<span class="nc" id="L60">            System.out.println(&quot;6: Total Faturado Por uma empresa num determinado periodo&quot;);</span>
<span class="nc" id="L61">            System.out.println(&quot;0: Close&quot;);</span>
<span class="nc" id="L62">            int es = escolha.nextInt();</span>
<span class="nc bnc" id="L63" title="All 2 branches missed.">            if (es == 1) {</span>
<span class="nc" id="L64">                Scanner e = new Scanner(System.in);</span>
<span class="nc" id="L65">                System.out.println(&quot;Introduza o seu e-mail:&quot;);</span>
<span class="nc" id="L66">                String email = e.nextLine();</span>
<span class="nc" id="L67">                Scanner password = new Scanner(System.in);</span>
<span class="nc" id="L68">                System.out.println(&quot;Introduza a sua password:&quot;);</span>
<span class="nc" id="L69">                String p = password.nextLine();</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">                if (t.LoginInfo(email, p)) {</span>
<span class="nc" id="L71">                    User x = null;</span>
<span class="nc bnc" id="L72" title="All 2 branches missed.">                    if (t.getUserByEmail(email).equals(x)) {</span>
<span class="nc" id="L73">                        System.out.println(&quot;Email não existe&quot;);</span>
<span class="nc" id="L74">                        this.save();</span>
<span class="nc" id="L75">                        return;</span>
                    }
<span class="nc" id="L77">                    x = t.getUserByEmail(email);</span>
<span class="nc" id="L78">                    String cod = t.getUserByEmail(email).getCodigo();</span>
<span class="nc bnc" id="L79" title="All 2 branches missed.">                    if (x instanceof Buyer) {</span>
<span class="nc" id="L80">                        this.menuB(cod);</span>
<span class="nc bnc" id="L81" title="All 2 branches missed.">                    } else if (x instanceof Voluntario) {</span>
<span class="nc" id="L82">                        this.menuV(cod);</span>
<span class="nc bnc" id="L83" title="All 2 branches missed.">                    } else if (x instanceof Loja) {</span>
<span class="nc" id="L84">                        this.menuL(cod);</span>
<span class="nc bnc" id="L85" title="All 2 branches missed.">                    } else if (x instanceof Transportadora) {</span>
                    }

<span class="nc" id="L88">                } else {</span>
<span class="nc" id="L89">                    System.out.println(&quot;Email ou pw nao existem&quot;);</span>
<span class="nc" id="L90">                    this.save();</span>
<span class="nc" id="L91">                    this.t = main.parse(LOGS_2_TXT, 2);</span>
                }
<span class="nc bnc" id="L93" title="All 2 branches missed.">            } else if (es == 2) {</span>
<span class="nc" id="L94">                this.register();</span>
<span class="nc bnc" id="L95" title="All 2 branches missed.">            } else if (es == 3) {</span>
<span class="nc" id="L96">                t.top10Empresas();</span>
<span class="nc bnc" id="L97" title="All 2 branches missed.">            } else if (es == 4) {</span>
<span class="nc" id="L98">                t.top10Users();</span>
<span class="nc bnc" id="L99" title="All 2 branches missed.">            } else if (es == 5) {</span>
<span class="nc" id="L100">                t.faturadoEmp();</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">            } else if (es == 6) {</span>
<span class="nc" id="L102">                t.faturadoEmp();</span>
            } else {
<span class="nc" id="L104">                save();</span>
<span class="nc" id="L105">                break;</span>
            }

<span class="nc" id="L108">        }</span>
<span class="nc" id="L109">    }</span>

    public void register() {
<span class="nc" id="L112">        System.out.println(&quot;Quer se registar como?&quot;);</span>
<span class="nc" id="L113">        System.out.println(&quot;1: traz_aqui.Buyer&quot;);</span>
<span class="nc" id="L114">        System.out.println(&quot;2: traz_aqui.Voluntario &quot;);</span>
<span class="nc" id="L115">        System.out.println(&quot;3: traz_aqui.Transportadora &quot;);</span>
<span class="nc" id="L116">        System.out.println(&quot;4: loja&quot;);</span>
<span class="nc" id="L117">        System.out.println(&quot;0: Close&quot;);</span>
<span class="nc" id="L118">        Scanner escolha = new Scanner(System.in);</span>
<span class="nc" id="L119">        int es = escolha.nextInt();</span>
<span class="nc bnc" id="L120" title="All 2 branches missed.">        if (es == 1) {</span>
<span class="nc" id="L121">            String codbuyerF = registerbuyer();</span>
<span class="nc bnc" id="L122" title="All 2 branches missed.">            if (codbuyerF.equals(&quot;0&quot;)) {</span>
            } else {
<span class="nc" id="L124">                this.menuB(codbuyerF);</span>
            }
<span class="nc bnc" id="L126" title="All 2 branches missed.">        } else if (es == 2) {</span>
<span class="nc" id="L127">            String codvolF = registerVoluntario();</span>
<span class="nc bnc" id="L128" title="All 2 branches missed.">            if (codvolF.equals(&quot;0&quot;)) {</span>
            } else {
<span class="nc" id="L130">                this.menuV(codvolF);</span>
            }
<span class="nc bnc" id="L132" title="All 2 branches missed.">        } else if (es == 3) {</span>
<span class="nc" id="L133">            String codtransF = registerTransportadora();</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">            if (codtransF.equals(&quot;0&quot;)) {</span>
            } else {
<span class="nc" id="L136">                this.menuT(codtransF);</span>
            }
<span class="nc bnc" id="L138" title="All 2 branches missed.">        } else if (es == 4) {</span>
<span class="nc" id="L139">            String codLojF = registerLoja();</span>
<span class="nc bnc" id="L140" title="All 2 branches missed.">            if (codLojF.equals(&quot;0&quot;)) {</span>
            } else {
<span class="nc" id="L142">                this.menuL(codLojF);</span>
            }
<span class="nc" id="L144">        } else {</span>
<span class="nc" id="L145">            save();</span>
<span class="nc" id="L146">            this.t = main.parse(LOGS_2_TXT, 2);</span>
        }

<span class="nc" id="L149">    }</span>

    // username,codigo,password,lx,ly,email, custokm , raio ,nif , aval, numrev
    public String registerTransportadora() {
<span class="nc" id="L153">        Transportadora b = null;</span>
<span class="nc" id="L154">        String result = &quot;0&quot;;</span>
<span class="nc" id="L155">        Scanner e = new Scanner(System.in);</span>
<span class="nc" id="L156">        System.out.println(INSIRA_EMAIL);</span>
<span class="nc" id="L157">        String email = e.nextLine();</span>

<span class="nc" id="L159">        Scanner p = new Scanner(System.in);</span>
<span class="nc" id="L160">        System.out.println(INSIRA_UMA_PASS);</span>
<span class="nc" id="L161">        String password = p.nextLine();</span>

<span class="nc" id="L163">        Scanner n = new Scanner(System.in);</span>
<span class="nc" id="L164">        System.out.println(&quot;insira o nome da empresa: &quot;);</span>
<span class="nc" id="L165">        String name = n.nextLine();</span>


<span class="nc" id="L168">        Scanner x1 = new Scanner(System.in);</span>
<span class="nc" id="L169">        System.out.println(INSIRA_AS_SUAS_COORDENADAS);</span>
<span class="nc" id="L170">        System.out.println(COORDENADA_X);</span>
<span class="nc" id="L171">        String x = x1.nextLine();</span>
<span class="nc" id="L172">        Scanner y1 = new Scanner(System.in);</span>
<span class="nc" id="L173">        System.out.println(COORDENADA_Y);</span>
<span class="nc" id="L174">        String y = y1.nextLine();</span>

<span class="nc" id="L176">        Scanner custo1 = new Scanner(System.in);</span>
<span class="nc" id="L177">        System.out.println(&quot;insira o custo por km:&quot;);</span>
<span class="nc" id="L178">        String custo = custo1.nextLine();</span>

<span class="nc" id="L180">        Scanner r1 = new Scanner(System.in);</span>
<span class="nc" id="L181">        System.out.println(&quot;insira o raio em que pode fazer entregas:&quot;);</span>
<span class="nc" id="L182">        String r = r1.nextLine();</span>

<span class="nc" id="L184">        Scanner nif1 = new Scanner(System.in);</span>
<span class="nc" id="L185">        System.out.println(&quot;insira o nif da empresa:&quot;);</span>
<span class="nc" id="L186">        String nif = nif1.nextLine();</span>

<span class="nc" id="L188">        String codigo = &quot;t&quot; + this.getRandomNumberString();</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">        while (!t.checkCodigo(codigo)) {</span>
<span class="nc" id="L190">            codigo = &quot;l&quot; + this.getRandomNumberString();</span>
        }

        try {
<span class="nc" id="L194">            b = new Transportadora(name, codigo, password, Double.parseDouble(x), Double.parseDouble(y), email,</span>
<span class="nc" id="L195">                    Double.parseDouble(custo), Double.parseDouble(r), Integer.parseInt(nif), 0, 0);</span>
<span class="nc" id="L196">        } catch (NullPointerException erro) {</span>
<span class="nc" id="L197">            System.out.println(ERRO_NO_PREENCHIMENTO);</span>

<span class="nc" id="L199">            return result;</span>
<span class="nc" id="L200">        }</span>

<span class="nc bnc" id="L202" title="All 2 branches missed.">        if (this.t.addTrans(b) == 1) {</span>
<span class="nc" id="L203">            System.out.println(REGISTO_FEITO_COM_SUCESSO_);</span>
<span class="nc" id="L204">            save();</span>
<span class="nc" id="L205">            return codigo;</span>
        }
<span class="nc" id="L207">        return result;</span>
    }

    //username,codigo,password,lx,ly,email, raio,livre,numreviews,avaliacao
    public String registerVoluntario() {
<span class="nc" id="L212">        Voluntario b = null;</span>
<span class="nc" id="L213">        String result = &quot;0&quot;;</span>
<span class="nc" id="L214">        Scanner e = new Scanner(System.in);</span>
<span class="nc" id="L215">        System.out.println(INSIRA_EMAIL);</span>
<span class="nc" id="L216">        String email = e.nextLine();</span>

<span class="nc" id="L218">        Scanner p = new Scanner(System.in);</span>
<span class="nc" id="L219">        System.out.println(INSIRA_UMA_PASS);</span>
<span class="nc" id="L220">        String password = p.nextLine();</span>

<span class="nc" id="L222">        Scanner n = new Scanner(System.in);</span>
<span class="nc" id="L223">        System.out.println(&quot;insira o seu nome: &quot;);</span>
<span class="nc" id="L224">        String name = n.nextLine();</span>


<span class="nc" id="L227">        Scanner x1 = new Scanner(System.in);</span>
<span class="nc" id="L228">        System.out.println(INSIRA_AS_SUAS_COORDENADAS);</span>
<span class="nc" id="L229">        System.out.println(COORDENADA_X);</span>
<span class="nc" id="L230">        String x = x1.nextLine();</span>
<span class="nc" id="L231">        Scanner y1 = new Scanner(System.in);</span>
<span class="nc" id="L232">        System.out.println(COORDENADA_Y);</span>
<span class="nc" id="L233">        String y = y1.nextLine();</span>

<span class="nc" id="L235">        Scanner r1 = new Scanner(System.in);</span>
<span class="nc" id="L236">        System.out.println(&quot;insira o raio em que pode fazer entregas:&quot;);</span>
<span class="nc" id="L237">        String r = r1.nextLine();</span>

<span class="nc" id="L239">        String codigo = &quot;v&quot; + this.getRandomNumberString();</span>
<span class="nc bnc" id="L240" title="All 2 branches missed.">        while (!t.checkCodigo(codigo)) {</span>
<span class="nc" id="L241">            codigo = &quot;l&quot; + this.getRandomNumberString();</span>
        }

        try {
<span class="nc" id="L245">            b = new Voluntario(name, codigo, password, Double.parseDouble(x), Double.parseDouble(y), email,</span>
<span class="nc" id="L246">                    Double.parseDouble(r), true, 0, 0);</span>
<span class="nc" id="L247">        } catch (NullPointerException erro) {</span>
<span class="nc" id="L248">            System.out.println(ERRO_NO_PREENCHIMENTO);</span>
<span class="nc" id="L249">            return result;</span>
<span class="nc" id="L250">        }</span>

<span class="nc bnc" id="L252" title="All 2 branches missed.">        if (this.t.addVol(b) == 1) {</span>
<span class="nc" id="L253">            System.out.println(REGISTO_FEITO_COM_SUCESSO_);</span>
<span class="nc" id="L254">            save();</span>
<span class="nc" id="L255">            return codigo;</span>
        }

<span class="nc" id="L258">        return result;</span>
    }

    //username,codigo,password,lx,ly,email
    public String registerLoja() {
<span class="nc" id="L263">        Loja b = null;</span>
<span class="nc" id="L264">        String result = &quot;0&quot;;</span>
<span class="nc" id="L265">        Scanner e = new Scanner(System.in);</span>
<span class="nc" id="L266">        System.out.println(INSIRA_EMAIL);</span>
<span class="nc" id="L267">        String email = e.nextLine();</span>

<span class="nc" id="L269">        Scanner p = new Scanner(System.in);</span>
<span class="nc" id="L270">        System.out.println(INSIRA_UMA_PASS);</span>
<span class="nc" id="L271">        String password = p.nextLine();</span>

<span class="nc" id="L273">        Scanner n = new Scanner(System.in);</span>
<span class="nc" id="L274">        System.out.println(&quot;insira o nome da loja: &quot;);</span>
<span class="nc" id="L275">        String name = n.nextLine();</span>


<span class="nc" id="L278">        Scanner x1 = new Scanner(System.in);</span>
<span class="nc" id="L279">        System.out.println(INSIRA_AS_SUAS_COORDENADAS);</span>
<span class="nc" id="L280">        System.out.println(COORDENADA_X);</span>
<span class="nc" id="L281">        String x = x1.nextLine();</span>
<span class="nc" id="L282">        Scanner y1 = new Scanner(System.in);</span>
<span class="nc" id="L283">        System.out.println(COORDENADA_Y);</span>
<span class="nc" id="L284">        String y = y1.nextLine();</span>

<span class="nc" id="L286">        String codigo = &quot;l&quot; + this.getRandomNumberString();</span>
<span class="nc bnc" id="L287" title="All 2 branches missed.">        while (!t.checkCodigo(codigo)) {</span>
<span class="nc" id="L288">            codigo = &quot;l&quot; + this.getRandomNumberString();</span>
        }

        try {
<span class="nc" id="L292">            b = new Loja(name, codigo, password, Double.parseDouble(x), Double.parseDouble(y), email);</span>
<span class="nc" id="L293">        } catch (NullPointerException erro) {</span>
<span class="nc" id="L294">            System.out.println(ERRO_NO_PREENCHIMENTO);</span>
<span class="nc" id="L295">            return result;</span>
<span class="nc" id="L296">        }</span>

<span class="nc bnc" id="L298" title="All 2 branches missed.">        if (this.t.addLoja(b) == 1) {</span>
<span class="nc" id="L299">            System.out.println(REGISTO_FEITO_COM_SUCESSO_);</span>
<span class="nc" id="L300">            save();</span>
<span class="nc" id="L301">            return codigo;</span>
        }
<span class="nc" id="L303">        return result;</span>
    }

    //username,codigo,password,lx,ly,email
    public String registerbuyer() {
<span class="nc" id="L308">        Buyer b = null;</span>
<span class="nc" id="L309">        String result = &quot;0&quot;;</span>
<span class="nc" id="L310">        Scanner e = new Scanner(System.in);</span>
<span class="nc" id="L311">        System.out.println(INSIRA_EMAIL);</span>
<span class="nc" id="L312">        String email = e.nextLine();</span>

<span class="nc" id="L314">        Scanner p = new Scanner(System.in);</span>
<span class="nc" id="L315">        System.out.println(INSIRA_UMA_PASS);</span>
<span class="nc" id="L316">        String password = p.nextLine();</span>

<span class="nc" id="L318">        Scanner n = new Scanner(System.in);</span>
<span class="nc" id="L319">        System.out.println(&quot;insira o seu nome: &quot;);</span>
<span class="nc" id="L320">        String name = n.nextLine();</span>


<span class="nc" id="L323">        Scanner x1 = new Scanner(System.in);</span>
<span class="nc" id="L324">        System.out.println(INSIRA_AS_SUAS_COORDENADAS);</span>
<span class="nc" id="L325">        System.out.println(COORDENADA_X);</span>
<span class="nc" id="L326">        String x = x1.nextLine();</span>
<span class="nc" id="L327">        Scanner y1 = new Scanner(System.in);</span>
<span class="nc" id="L328">        System.out.println(COORDENADA_Y);</span>
<span class="nc" id="L329">        String y = y1.nextLine();</span>

<span class="nc" id="L331">        String codigo = &quot;u&quot; + this.getRandomNumberString();</span>
<span class="nc bnc" id="L332" title="All 2 branches missed.">        while (!t.checkCodigo(codigo)) {</span>
<span class="nc" id="L333">            codigo = &quot;u&quot; + this.getRandomNumberString();</span>
        }

        try {
<span class="nc" id="L337">            b = new Buyer(name, codigo, password, Double.parseDouble(x), Double.parseDouble(y), email);</span>
<span class="nc" id="L338">        } catch (NullPointerException erro) {</span>
<span class="nc" id="L339">            System.out.println(ERRO_NO_PREENCHIMENTO);</span>
<span class="nc" id="L340">            return result;</span>
<span class="nc" id="L341">        }</span>

<span class="nc bnc" id="L343" title="All 2 branches missed.">        if (this.t.addBuy(b) == 1) {</span>
<span class="nc" id="L344">            System.out.println(REGISTO_FEITO_COM_SUCESSO_);</span>
<span class="nc" id="L345">            save();</span>
<span class="nc" id="L346">            return codigo;</span>
        }
<span class="nc" id="L348">        return result;</span>
    }


    public String getRandomNumberString() {
        // It will generate 6 digit random Number.
        // from 0 to 999999
<span class="nc" id="L355">        int number = rnd.nextInt(999999);</span>

        // this will convert any number sequence into 6 character.
<span class="nc" id="L358">        return String.format(&quot;%06d&quot;, number);</span>
    }

    public void menuT(String codigo) {
<span class="nc" id="L362">        int i = 0;</span>
<span class="nc" id="L363">        User volun = t.getUserByCodigo(codigo);</span>

<span class="nc bnc" id="L365" title="All 2 branches missed.">        while (i == 0) {</span>
<span class="nc" id="L366">            Scanner optn = new Scanner(System.in);</span>
<span class="nc" id="L367">            System.out.println(&quot;1: Levantar traz_aqui.Encomenda&quot;); // pronto para fazer encomendas ou nao</span>
<span class="nc" id="L368">            System.out.println(&quot;2: Marcar encomenda entregue&quot;);</span>
<span class="nc" id="L369">            System.out.println(&quot;3: Historico&quot;);</span>
            //System.out.println(&quot;4: Encomendas durante uma certa data&quot;); // se tiver tempo----------- fazer tb voluntariado nao esquecer 
<span class="nc" id="L371">            System.out.println(SAIR);</span>
<span class="nc" id="L372">            int op = optn.nextInt();</span>

<span class="nc bnc" id="L374" title="All 2 branches missed.">            if (op == 1) {</span>
<span class="nc" id="L375">                System.out.println(&quot;Insira codigo de encomenda para ser levantada&quot;);</span>
<span class="nc" id="L376">                Scanner codEncMenuT1 = new Scanner(System.in);</span>
<span class="nc" id="L377">                String codEncMenuT = codEncMenuT1.nextLine();</span>

<span class="nc" id="L379">                t.mudaestadoENC(codEncMenuT, 6);</span>


<span class="nc bnc" id="L382" title="All 2 branches missed.">            } else if (op == 2) {</span>
<span class="nc" id="L383">                System.out.println(&quot;Insira codigo de encomenda que foi entregue&quot;);</span>
<span class="nc" id="L384">                Scanner codEncMenuT1 = new Scanner(System.in);</span>
<span class="nc" id="L385">                String codEncMenuT = codEncMenuT1.nextLine();</span>

<span class="nc" id="L387">                t.mudaestadoENC(codEncMenuT, 6);</span>


<span class="nc bnc" id="L390" title="All 2 branches missed.">            } else if (op == 3) {</span>
<span class="nc" id="L391">                t.PrintHistT(codigo);</span>
            } else {
<span class="nc" id="L393">                this.save();</span>
<span class="nc" id="L394">                break;</span>
            }
<span class="nc" id="L396">        }</span>
<span class="nc" id="L397">    }</span>

    public void menuL(String codigo) {
<span class="nc" id="L400">        int i = 0;</span>
<span class="nc" id="L401">        User cloja = t.getUserByCodigo(codigo);</span>

<span class="nc bnc" id="L403" title="All 2 branches missed.">        while (i == 0) {</span>
<span class="nc" id="L404">            Scanner optn = new Scanner(System.in);</span>
<span class="nc" id="L405">            System.out.println(&quot;1: traz_aqui.Encomenda pronta&quot;); // pronto para fazer encomendas ou nao</span>
<span class="nc" id="L406">            System.out.println(&quot;2: Pedir random voluntario&quot;);</span>
<span class="nc" id="L407">            System.out.println(SAIR);</span>
<span class="nc" id="L408">            int op = optn.nextInt();</span>

<span class="nc bnc" id="L410" title="All 2 branches missed.">            if (op == 1) {</span>
<span class="nc" id="L411">                System.out.println(&quot;Insira codigo de encomenda para ser levantada&quot;);</span>
<span class="nc" id="L412">                Scanner codEncMenuL1 = new Scanner(System.in);</span>
<span class="nc" id="L413">                String codEncMenu = codEncMenuL1.nextLine();</span>
<span class="nc bnc" id="L414" title="All 2 branches missed.">                if (t.TransportadoraOuVoluntario(codEncMenu) == 1) {</span>
<span class="nc" id="L415">                    t.mudaestadoENC(codEncMenu, 4);</span>
<span class="nc bnc" id="L416" title="All 2 branches missed.">                } else if (t.TransportadoraOuVoluntario(codEncMenu) == 2) {</span>
<span class="nc" id="L417">                    t.mudaestadoENC(codEncMenu, 3);</span>
<span class="nc bnc" id="L418" title="All 2 branches missed.">                } else if (t.TransportadoraOuVoluntario(codEncMenu) == 0) {</span>
<span class="nc" id="L419">                    System.out.println(&quot; codigo de encomenda errado &quot;);</span>
                }


<span class="nc bnc" id="L423" title="All 2 branches missed.">            } else if (op == 2) {</span>
<span class="nc" id="L424">                System.out.println(&quot;Insira codigo de encomenda para pedir a um voluntario&quot;);</span>
<span class="nc" id="L425">                Scanner codEncMenuL2 = new Scanner(System.in);</span>
<span class="nc" id="L426">                String codEncMenu1 = codEncMenuL2.nextLine();</span>


<span class="nc bnc" id="L429" title="All 2 branches missed.">                if (t.TransportadoraOuVoluntario(codEncMenu1) == 0) {</span>
<span class="nc" id="L430">                    String codV = t.getVolLivre(codEncMenu1);</span>
<span class="nc" id="L431">                    t.setDelieverV(codV, codEncMenu1);</span>
<span class="nc" id="L432">                    t.mudaestadoENC(codEncMenu1, 8);</span>
                }


<span class="nc" id="L436">            } else {</span>
<span class="nc" id="L437">                this.save();</span>
<span class="nc" id="L438">                break;</span>
            }


<span class="nc" id="L442">        }</span>
<span class="nc" id="L443">    }</span>


    public void menuV(String codigo) {
<span class="nc" id="L447">        int i = 0;</span>
<span class="nc" id="L448">        User volun = t.getUserByCodigo(codigo);</span>

<span class="nc bnc" id="L450" title="All 2 branches missed.">        while (i == 0) {</span>
<span class="nc" id="L451">            Scanner optn = new Scanner(System.in);</span>
<span class="nc" id="L452">            System.out.println(&quot;1: Mudar Estado&quot;); // pronto para fazer encomendas ou nao </span>
<span class="nc" id="L453">            System.out.println(&quot;2: Escolher encomendas disponiveis dentro de raio: &quot;);</span>
<span class="nc" id="L454">            System.out.println(&quot;3: Marcar encomenda entregue&quot;);</span>
<span class="nc" id="L455">            System.out.println(&quot;4: Historico&quot;);</span>
<span class="nc" id="L456">            System.out.println(&quot;5: Ver Encomendas para aceitar&quot;);</span>
<span class="nc" id="L457">            System.out.println(SAIR);</span>
<span class="nc" id="L458">            int op = optn.nextInt();</span>

<span class="nc bnc" id="L460" title="All 2 branches missed.">            if (op == 1) {</span>
<span class="nc bnc" id="L461" title="All 2 branches missed.">                if (t.EncomendaAtualV(codigo).equals(&quot;free&quot;)) {</span>
<span class="nc" id="L462">                    t.mudaestadoVoluntario(volun);</span>
                } else {
<span class="nc" id="L464">                    System.out.println(&quot;Tem de entregar a encomenda atual&quot;);</span>
                }

<span class="nc bnc" id="L467" title="All 2 branches missed.">            } else if (op == 2) {</span>
<span class="nc bnc" id="L468" title="All 2 branches missed.">                if (t.EncomendaAtualV(codigo).equals(&quot;free&quot;)) {</span>
<span class="nc" id="L469">                    List&lt;Encomenda&gt; encomendas = this.t.EncomendasParaVoluntarioDentroRaio(codigo);</span>
<span class="nc" id="L470">                    Scanner l = new Scanner(System.in);</span>
<span class="nc" id="L471">                    int i1 = 0;</span>

<span class="nc" id="L473">                    System.out.println(&quot;Escolha uma traz_aqui.Encomenda: &quot;);</span>

<span class="nc bnc" id="L475" title="All 2 branches missed.">                    for (Encomenda b : encomendas) {</span>
<span class="nc" id="L476">                        System.out.println(i1 + &quot; - &quot; + b.getcodEncomenda());</span>
<span class="nc" id="L477">                        i1++;</span>
<span class="nc" id="L478">                    }</span>
<span class="nc" id="L479">                    int input = l.nextInt();</span>
<span class="nc bnc" id="L480" title="All 4 branches missed.">                    if (0 &lt;= input &amp;&amp; input &lt; i1) {</span>
<span class="nc" id="L481">                        Encomenda encf = encomendas.get(input);</span>
<span class="nc" id="L482">                        String codigoenc = encf.getcodEncomenda();</span>
<span class="nc" id="L483">                        t.mudaestadoENC(codigoenc, 6);</span>
<span class="nc" id="L484">                        t.mudaestadoVoluntario(volun);</span>
<span class="nc" id="L485">                        t.setDelieverV(codigo, codigoenc);</span>

<span class="nc" id="L487">                    } else {</span>
<span class="nc" id="L488">                        System.out.println(&quot;Tem de entregar a encomenda atual&quot;);</span>
                    }
<span class="nc" id="L490">                }</span>


<span class="nc bnc" id="L493" title="All 2 branches missed.">            } else if (op == 3) {</span>
<span class="nc bnc" id="L494" title="All 2 branches missed.">                if (t.EncomendaAtualV(codigo).equals(&quot;free&quot;)) {</span>
<span class="nc" id="L495">                    System.out.println(&quot;Não tem encomendas para marcar como entregues&quot;);</span>
                } else {
<span class="nc" id="L497">                    String codigoenc = t.EncomendaAtualV(codigo);</span>
<span class="nc" id="L498">                    t.mudaestadoENC(codigoenc, 1);</span>

<span class="nc" id="L500">                }</span>


<span class="nc bnc" id="L503" title="All 2 branches missed.">            } else if (op == 4) {</span>
<span class="nc" id="L504">                t.PrintHistV(codigo);</span>
<span class="nc bnc" id="L505" title="All 2 branches missed.">            } else if (op == 5) {</span>
<span class="nc bnc" id="L506" title="All 2 branches missed.">                if (!t.EncPedidas(codigo).equals(&quot;n&quot;)) {</span>
<span class="nc" id="L507">                    String s = t.EncPedidas(codigo);</span>
<span class="nc" id="L508">                    Scanner optn1 = new Scanner(System.in);</span>
<span class="nc" id="L509">                    System.out.println(&quot;Aceita a encomenda&quot; + s + &quot;?&quot;);</span>
<span class="nc" id="L510">                    System.out.println(&quot;1.sim 2.nao:&quot;);</span>
<span class="nc" id="L511">                    int op1 = optn1.nextInt();</span>
<span class="nc bnc" id="L512" title="All 2 branches missed.">                    if (op == 1) {</span>
<span class="nc" id="L513">                        t.mudaestadoENC(s, 6);</span>
<span class="nc" id="L514">                        t.mudaestadoVoluntario(volun);</span>
<span class="nc" id="L515">                        t.setDelieverV(codigo, s);</span>
                    }
<span class="nc" id="L517">                }</span>
            } else {
<span class="nc" id="L519">                this.save();</span>
<span class="nc" id="L520">                break;</span>
            }
<span class="nc" id="L522">        }</span>
<span class="nc" id="L523">    }</span>


    public void menuB(String codigo) {
<span class="nc" id="L527">        int i = 0;</span>

<span class="nc bnc" id="L529" title="All 2 branches missed.">        while (i == 0) {</span>
<span class="nc" id="L530">            Scanner optn = new Scanner(System.in);</span>
<span class="nc" id="L531">            System.out.println(&quot;1: Fazer uma encomenda&quot;);</span>
<span class="nc" id="L532">            System.out.println(&quot;2: Classificar Entregas&quot;);</span>
<span class="nc" id="L533">            System.out.println(&quot;4: Historico&quot;);</span>
<span class="nc" id="L534">            System.out.println(SAIR);</span>
<span class="nc" id="L535">            int op = optn.nextInt();</span>

<span class="nc bnc" id="L537" title="All 2 branches missed.">            if (op == 1) {</span>
<span class="nc" id="L538">                List&lt;Loja&gt; lojas = this.t.Tlojas();</span>
<span class="nc" id="L539">                Scanner l = new Scanner(System.in);</span>
<span class="nc" id="L540">                int i1 = 0;</span>

<span class="nc" id="L542">                System.out.println(&quot;Escolha uma loja: &quot;);</span>

<span class="nc bnc" id="L544" title="All 2 branches missed.">                for (Loja loja : lojas) {</span>
<span class="nc" id="L545">                    System.out.println(i1 + &quot; - &quot; + loja.getUserName());</span>
<span class="nc" id="L546">                    i1++;</span>
<span class="nc" id="L547">                }</span>
<span class="nc" id="L548">                int input = l.nextInt();</span>
<span class="nc bnc" id="L549" title="All 4 branches missed.">                if (0 &lt;= input &amp;&amp; input &lt; i1) {</span>
<span class="nc" id="L550">                    Loja lojaf = lojas.get(input);</span>
<span class="nc" id="L551">                    Encomenda e = new Encomenda();</span>
<span class="nc" id="L552">                    String codenc = &quot;e&quot; + this.getRandomNumberString();</span>
<span class="nc" id="L553">                    String codu = codigo;</span>
<span class="nc" id="L554">                    String codlo = lojaf.getEmail();</span>
<span class="nc" id="L555">                    String codT = &quot;&quot;;</span>
<span class="nc" id="L556">                    int estado = 2;</span>

<span class="nc" id="L558">                    ArrayList&lt;LinhaEncomenda&gt; produto = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L559">                    int flag = 0;</span>
<span class="nc" id="L560">                    double peso2 = 0;</span>
<span class="nc bnc" id="L561" title="All 2 branches missed.">                    while (flag == 0) {</span>
<span class="nc" id="L562">                        int escolha2 = 0;</span>
<span class="nc" id="L563">                        System.out.println(&quot;insira codigo do produto &quot;);</span>
<span class="nc" id="L564">                        Scanner cp = new Scanner(System.in);</span>
<span class="nc" id="L565">                        String codp = cp.nextLine();</span>

<span class="nc" id="L567">                        System.out.println(&quot;insira a quantidade&quot;);</span>
<span class="nc" id="L568">                        Scanner qp = new Scanner(System.in);</span>
<span class="nc" id="L569">                        Double quantp = qp.nextDouble();</span>

<span class="nc" id="L571">                        double preco2 = 3.0 * quantp;</span>
<span class="nc" id="L572">                        peso2 = peso2 + 1 * quantp;</span>

<span class="nc" id="L574">                        LinhaEncomenda linha = new LinhaEncomenda(codp, &quot;&quot;, preco2, quantp);</span>
<span class="nc" id="L575">                        produto.add(linha);</span>

<span class="nc" id="L577">                        System.out.println(&quot;quer continuar a comprar?&quot;);</span>
<span class="nc" id="L578">                        System.out.println(SIM);</span>
<span class="nc" id="L579">                        System.out.println(NAO);</span>
<span class="nc" id="L580">                        Scanner oplinhaenc = new Scanner(System.in);</span>
<span class="nc" id="L581">                        escolha2 = oplinhaenc.nextInt();</span>
<span class="nc bnc" id="L582" title="All 2 branches missed.">                        if (escolha2 == 2) {</span>
<span class="nc" id="L583">                            flag = 1;</span>
                        }


<span class="nc" id="L587">                    }</span>

<span class="nc" id="L589">                    System.out.println(&quot;quer Transporte?&quot;);</span>
<span class="nc" id="L590">                    System.out.println(SIM);</span>
<span class="nc" id="L591">                    System.out.println(NAO);</span>
<span class="nc" id="L592">                    Scanner querTrans1 = new Scanner(System.in);</span>
<span class="nc" id="L593">                    int querTrans = querTrans1.nextInt();</span>
<span class="nc bnc" id="L594" title="All 2 branches missed.">                    if (querTrans == 1) {</span>
                        //TransportadoraMaisBarata(String codBuyer,String codLoja, double peso)
<span class="nc" id="L596">                        String trasnporte = t.TransportadoraMaisBarata(codu, codlo, peso2);</span>
<span class="nc bnc" id="L597" title="All 2 branches missed.">                        if (trasnporte.equals(&quot;n&quot;)) {</span>
                        } else {
                            //custoTransporte1 (String codBuyer , String codTransp,String codLoja, double peso )
<span class="nc" id="L600">                            double custoTrans = t.custoTransporte1(codu, trasnporte, codlo, peso2);</span>
<span class="nc" id="L601">                            System.out.println(&quot;Pela traz_aqui.Transportadora mais barata o preco fica:&quot; + custoTrans);</span>
<span class="nc" id="L602">                            System.out.println(&quot;Aceita?&quot;);</span>
<span class="nc" id="L603">                            System.out.println(SIM);</span>
<span class="nc" id="L604">                            System.out.println(NAO);</span>
<span class="nc" id="L605">                            Scanner aceitaTrans1 = new Scanner(System.in);</span>
<span class="nc" id="L606">                            int aceitaTrans = querTrans1.nextInt();</span>
<span class="nc bnc" id="L607" title="All 2 branches missed.">                            if (aceitaTrans == 1) {</span>
<span class="nc" id="L608">                                codT = trasnporte;</span>
<span class="nc" id="L609">                                estado = 5;</span>
                            }
                        }
                    }

<span class="nc" id="L614">                    Encomenda novaenc = new Encomenda(codenc, codu, codlo, codT, peso2, null, estado, produto);</span>
<span class="nc" id="L615">                    System.out.println(&quot;traz_aqui.Encomenda feita com sucesso&quot;);</span>
<span class="nc" id="L616">                    this.t.addEnc(novaenc);</span>

<span class="nc" id="L618">                } else {</span>
<span class="nc" id="L619">                    System.out.println(&quot;Tente outra opcao&quot;);</span>
                }

<span class="nc bnc" id="L622" title="All 2 branches missed.">            } else if (op == 2) {</span>

<span class="nc" id="L624">                List&lt;Encomenda&gt; enc = this.t.EncomendasEntreguesSemReviews(codigo);</span>

<span class="nc" id="L626">                System.out.println(&quot;As suas encomendas:&quot;);</span>
<span class="nc bnc" id="L627" title="All 2 branches missed.">                for (Encomenda e : enc) {</span>
<span class="nc" id="L628">                    System.out.println(&quot;traz_aqui.Encomenda :&quot; + e.getcodEncomenda() + &quot;; Entregue por: &quot; + e.getcodDeliver() + t.getUserByCodigo(e.getcodDeliver()).getUserName());</span>

<span class="nc" id="L630">                }</span>
<span class="nc" id="L631">                System.out.println(&quot;Escreva um codigo de encomenda para avaliar&quot;);</span>
<span class="nc" id="L632">                Scanner codencaval1 = new Scanner(System.in);</span>
<span class="nc" id="L633">                String codencaval = codencaval1.nextLine();</span>

<span class="nc" id="L635">                int flagcod = 1;</span>
<span class="nc bnc" id="L636" title="All 2 branches missed.">                for (Encomenda e : enc) {</span>
<span class="nc bnc" id="L637" title="All 2 branches missed.">                    if (e.getcodEncomenda().equals(codencaval1)) {</span>
<span class="nc" id="L638">                        flagcod = 0;</span>
<span class="nc" id="L639">                        break;</span>
                    }

<span class="nc" id="L642">                }</span>

<span class="nc bnc" id="L644" title="All 2 branches missed.">                if (flagcod == 0) {</span>
<span class="nc" id="L645">                    System.out.println(&quot;a sua review entre 0 e 10&quot;);</span>
<span class="nc" id="L646">                    Scanner reviewenc1 = new Scanner(System.in);</span>
<span class="nc" id="L647">                    double reviewenc = reviewenc1.nextDouble();</span>
<span class="nc bnc" id="L648" title="All 4 branches missed.">                    if (0 &lt;= reviewenc &amp;&amp; reviewenc &lt;= 10) {</span>
<span class="nc bnc" id="L649" title="All 2 branches missed.">                        if (t.reviews(codencaval, reviewenc)) {</span>
<span class="nc" id="L650">                            System.out.println(&quot;review feita com sucesso&quot;);</span>
                        }
                    }
                }


<span class="nc" id="L656">            } else {</span>
<span class="nc" id="L657">                this.save();</span>
<span class="nc" id="L658">                break;</span>
            }
<span class="nc" id="L660">        }</span>
<span class="nc" id="L661">    }</span>
}
        

    
    
    
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>